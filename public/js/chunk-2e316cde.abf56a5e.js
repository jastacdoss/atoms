(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e316cde"],{"07e2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"px-5"},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col"},[a("h5",[t._v("Facilities")]),t._v(" "+t._s(t.filtered.length)+" / "+t._s(t.facilities.length)+" ")]),a("div",{staticClass:"col"},[a("h5",[t._v("Areas")]),t._v(" "+t._s(t.areas.filtered)+" / "+t._s(t.areas.total)+" ")]),a("div",{staticClass:"col"},[a("h5",[t._v("Cost")]),t._v(" "+t._s(t._f("toCurrency")(t.cost.filtered))+" / "+t._s(t._f("toCurrency")(t.cost.total))+" ")])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-3"},[a("h6",[t._v("Filter Release")]),a("b-form-select",{attrs:{options:t.releases},model:{value:t.filter.release,callback:function(e){t.$set(t.filter,"release",e)},expression:"filter.release"}})],1),a("div",{staticClass:"col-3"},[a("h6",[t._v("Filter TEam")]),a("b-form-select",{attrs:{options:t.teams},model:{value:t.filter.team,callback:function(e){t.$set(t.filter,"team",e)},expression:"filter.team"}})],1),a("div",{staticClass:"col-3"},[a("h6",[t._v("Filter Priority")]),a("b-form-select",{attrs:{options:t.priorities},model:{value:t.filter.priority,callback:function(e){t.$set(t.filter,"priority",e)},expression:"filter.priority"}})],1)]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-3"},[a("h6",{staticClass:"d-inline-flex mr-2"},[t._v("Display")]),"default"!==t.show?a("a",{staticClass:"mr-3",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.show="default"}}},[t._v("Default")]):t._e(),"dates"!==t.show?a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.show="dates"}}},[t._v("Dates")]):t._e()])]),a("table",{staticClass:"mx-auto table results"},[a("thead",[a("tr",{},[a("td",{staticClass:"col-1"},[t._v("ID")]),"dates"!==t.show?a("td",{staticClass:"col-1"},[t._v("Train Fac.")]):t._e(),a("td",{staticClass:"col-2"},[t._v("Name")]),"dates"!==t.show?a("td",{staticClass:"col-1"},[t._v("Areas "),a("small",[t._v("(O / T)")])]):t._e(),"dates"!==t.show?a("td",{staticClass:"col-1"},[t._v("Release")]):t._e(),a("td",{staticClass:"col-1"},[t._v("Team")]),a("td",{staticClass:"col-1"},[t._v("Priority")]),"dates"===t.show?a("td",{staticClass:"col-1"},[t._v("Notif. Dead")]):t._e(),"dates"===t.show?a("td",{staticClass:"col-1"},[t._v("POC Train Dead")]):t._e(),a("td",{staticClass:"col-1"},[t._v("Train Start")]),"dates"===t.show?a("td",{staticClass:"col-1"},[t._v("Train Dead")]):t._e(),a("td",{staticClass:"col-1"},[t._v("Go Live")]),"dates"!==t.show?a("td",{staticClass:"col-1"},[t._v("Cost")]):t._e()])]),a("tbody",[t._l(t.filtered,(function(e){return[a("tr",{key:"row-"+e.id},[a("td",{staticClass:"font-weight-bold"},[t._v(t._s(t._f("uppercase")(e.facility_id)))]),"dates"!==t.show?a("td",[a("facility-dropdown",{attrs:{options:t.facilityIds},on:{change:function(a){return t.update(e,"training_facility",a)}},model:{value:e.training_facility,callback:function(a){t.$set(e,"training_facility",a)},expression:"facility.training_facility"}})],1):t._e(),a("td",[t._v(t._s(e.facility_name))]),"dates"!==t.show?a("td",[t._v(" "+t._s(e.areas)+" "),a("small",[t._v("("+t._s(e.areas_operational+" / "+e.areas_tmu)+")")])]):t._e(),"dates"!==t.show?a("td",[t._v(" "+t._s(e.release_adjusted)+" "),a("small",[t._v("("+t._s(e.release)+")")])]):t._e(),a("td",[t._v(t._s(e.team_id))]),a("td",[t._v(t._s(e.deployment_priority))]),"dates"===t.show?a("td",[t._v(t._s(t._f("moment")(e.notification_dead_date,"MM-DD-YY")))]):t._e(),"dates"===t.show?a("td",[t._v(t._s(t._f("moment")(e.poc_training_dead_date,"MM-DD-YY")))]):t._e(),a("td",[t._v(t._s(t._f("moment")(e.training_start_date,"MM-DD-YY")))]),"dates"===t.show?a("td",[t._v(t._s(t._f("moment")(e.training_dead_date,"MM-DD-YY")))]):t._e(),a("td",[a("b-form-datepicker",{attrs:{id:"golive_date","date-format-options":{year:"2-digit",month:"2-digit",day:"2-digit"}},on:{input:function(a){return t.update(e,"go_live_date",a)}},model:{value:e.go_live_date,callback:function(a){t.$set(e,"go_live_date",a)},expression:"facility.go_live_date"}})],1),"dates"!==t.show?a("td",{staticClass:"cursor-pointer",on:{click:function(a){return t.toggle(e.id)}}},[t._v(" "+t._s(t._f("toCurrency")(e.cost))+" ")]):t._e()]),t.expand.includes(e.id)?a("tr",{key:"details-"+e.id},[a("td",{attrs:{colspan:"9"}},[a("travel",{attrs:{facility:e}})],1)]):t._e()]}))],2)])])},i=[],r=(a("a434"),a("c740"),a("d81d"),a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t._m(0),t._l(t.facility.travellers,(function(e,s){return a("div",{key:t.facility.id+"-"+e.who},[a("div",{staticClass:"row mb-2 ",class:s%2===0?"":"bg-lightgray"},[a("div",{staticClass:"col"},["POCs"===e.who?a("span",[t._v(t._s(e.how_many)+"x ")]):t._e(),t._v(" "+t._s(e.who)+" ")]),a("div",{staticClass:"col"},[t._v(" "+t._s(e.travel.method||"HOME")+" "),e.travel.method?a("small",[t._v("("+t._s(e.from)+" / "+t._s(e.to)+")")]):t._e()]),a("div",{staticClass:"col"},[t._v(" "+t._s(t._f("toCurrency")(e.travel.cost||0))+" "),"pov"===e.travel.method?a("small",[t._v("("+t._s(Math.round(e.travel.distance))+" miles)")]):t._e()]),a("div",{staticClass:"col"},[t._v(" "+t._s(t._f("toCurrency")(e.lodging||0))+" ")]),a("div",{staticClass:"col"},[t._v(" "+t._s(t._f("toCurrency")(e.meals||0))+" ")])])])}))],2)}),n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h6",[t._v("Who's Travelling")])]),a("div",{staticClass:"col"},[a("h6",[t._v("Method")])]),a("div",{staticClass:"col"},[a("h6",[t._v("Travel")])]),a("div",{staticClass:"col"},[a("h6",[t._v("Lodging")])]),a("div",{staticClass:"col"},[a("h6",[t._v("M & IE")])])])}],o={name:"Travel",components:{},props:{facility:Object},data:function(){return{}},methods:{},computed:{},created:function(){}},c=o,l=a("0c7c"),d=Object(l["a"])(c,r,n,!1,null,"4cfb87d2",null),u=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-select",{attrs:{options:t.options},on:{change:function(e){return t.$emit("change",e)}},model:{value:t.facility_id,callback:function(e){t.facility_id=e},expression:"facility_id"}})],1)},m=[],v={name:"FacilityDropdown",components:{},props:{options:Array,value:String},data:function(){return{facility_id:this.value}},methods:{},computed:{},created:function(){},watch:{facility_id:function(t){this.$emit("input",t)}}},p=v,h=Object(l["a"])(p,f,m,!1,null,"5e6a0d8c",null),y=h.exports,g=(a("d3b7"),a("b0c0"),a("99af"),a("51b2")),w=a("4360"),C="facility";function b(){return"/facilities"}var x={get:function(){return w["a"].commit("request","".concat(C,"/get")),g["a"].get(b()).then((function(t){return t})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/get")),t}))},create:function(t){return w["a"].commit("request","".concat(C,"/create")),g["a"].post("".concat(b()),t).then((function(e){return w["a"].commit("alerts/newMessage",{type:"success",message:"".concat(t.name," created successfully.")},{root:!0}),e})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/create")),t}))},update:function(t,e){return w["a"].commit("request","".concat(C,"/update")),g["a"].put("".concat(b(),"/").concat(t),e).then((function(t){return w["a"].commit("alerts/newMessage",{type:"success",message:"".concat(e.name," updated successfully.")},{root:!0}),t})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/update")),t}))},delete:function(t){return w["a"].commit("request","".concat(C,"/delete")),g["a"].delete("".concat(b(),"/").concat(t.id)).then((function(e){return w["a"].commit("alerts/newMessage",{type:"success",message:"".concat(t.name," deleted successfully.")},{root:!0}),e})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/delete")),t}))},reset:function(t){return w["a"].commit("request","".concat(C,"/reset")),g["a"].post("".concat(b(),"/reset"),{area_slug:t.slug}).then((function(e){return w["a"].commit("alerts/newMessage",{type:"success",message:"".concat(t.name," reset successfully.")},{root:!0}),e})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/reset")),t}))},siblings:function(t){return w["a"].commit("request","".concat(C,"/siblings")),g["a"].get("".concat(b(),"/").concat(t,"/siblings")).then((function(t){return t})).catch((function(t){throw w["a"].commit("alerts/newMessage",{type:"error",message:t.response.data},{root:!0}),t.response.data})).finally((function(t){return w["a"].commit("request","".concat(C,"/siblings")),t}))}},M={facility:x},D={get:function(t){return M[t]}},T=D.get("facility"),k={name:"Facility",components:{FacilityDropdown:y,Travel:u},data:function(){return{facilities:[],releases:[{value:null,text:"All Releases"},{value:1,text:"Release 1"},{value:2,text:"Release 2"},{value:3,text:"Release 3"},{value:4,text:"Release 4"}],teams:[{value:null,text:"All Teams"},{value:1,text:"Team 1"},{value:2,text:"Team 2"},{value:3,text:"Team 3"},{value:4,text:"Team 4"},{value:5,text:"Team 5"}],priorities:[{value:null,text:"All Priorities"},{value:"1",text:"Priority 1"},{value:"2",text:"Priority 2"},{value:"3",text:"Priority 3"}],filter:{release:null,team:null,priority:null},expand:[],show:"default"}},methods:{toggle:function(t){var e=_.indexOf(this.expand,t);-1===e?this.expand.push(t):this.expand.splice(e,1)},update:function(t,e,a){var s=this;console.log(e),console.log(a),t[e]=a,T.update(t.id,t).then((function(t){var e=_.findIndex(s.facilities,{id:t.data.id});s.$set(s.facilities,e,t.data)}))}},computed:{cost:function(){return{total:_.sumBy(this.facilities,(function(t){return _.sumBy(t.travellers,"cost")})),filtered:_.sumBy(this.filtered,(function(t){return _.sumBy(t.travellers,"cost")}))}},areas:function(){return{total:_.sumBy(this.facilities,"areas"),filtered:_.sumBy(this.filtered,"areas")}},facilityIds:function(){return _.map(this.facilities,(function(t){return{value:t.facility_id,text:t.facility_id.toUpperCase()}}))},filtered:function(){var t=this;return _.filter(this.facilities,(function(e){return(!t.filter.release||e.release_adjusted===t.filter.release)&&(!t.filter.team||e.team_id===t.filter.team)&&(!t.filter.priority||e.deployment_priority===t.filter.priority)}))}},created:function(){var t=this;T.get().then((function(e){t.facilities=e.data}))}},q=k,$=Object(l["a"])(q,s,i,!1,null,"2fcb51ad",null);e["default"]=$.exports},"99af":function(t,e,a){"use strict";var s=a("23e7"),i=a("d039"),r=a("e8b5"),n=a("861d"),o=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),f=a("b622"),_=a("2d00"),m=f("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",h=_>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),y=u("concat"),g=function(t){if(!n(t))return!1;var e=t[m];return void 0!==e?!!e:r(t)},w=!h||!y;s({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,s,i,r,n=o(this),u=d(n,0),f=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?n:arguments[e],g(r)){if(i=c(r.length),f+i>v)throw TypeError(p);for(a=0;a<i;a++,f++)a in r&&l(u,f,r[a])}else{if(f>=v)throw TypeError(p);l(u,f++,r)}return u.length=f,u}})},c740:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").findIndex,r=a("44d2"),n="findIndex",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(n)},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,r=a("1dde"),n=r("map");s({target:"Array",proto:!0,forced:!n},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-2e316cde.abf56a5e.js.map